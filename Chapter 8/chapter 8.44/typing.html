<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>打字效果</title>

    <style>
      @keyframes width {
        0% {
          width: 0;
        }
      }

      @keyframes caret {
        50% {
          border-right-color: transparent;
        }
      }

      h1 {
        font: bold 200% Consolas, Monaco, monospace;
        width: 15ch;
        border-right: 0.05em solid;

        overflow: hidden;

        /* nowrap 和 normal 一样，连续的空白符会被合并。但文本内的换行无效。 */
        white-space: nowrap;

        animation: width 3s steps(15), caret 1s steps(1) infinite;
      }
    </style>
  </head>
  <body>
    <h1>CSS is awesome! CSS is awesome!</h1>

    <script>
      const h1 = document.querySelector('h1');
      const len = h1.textContent.length;

      h1.style.width = len + 'ch';
      h1.style.animationTimingFunction = `steps(${len}), steps(1)`;
    </script>
  </body>
</html>
